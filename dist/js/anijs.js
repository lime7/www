!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("AniJS-RWWD");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=function(t){var n="data-anijs",r="default",i="|",a="$",o="if",l="on",s=["do","after","before","to"],f="(\\s+|^)",v="(\\s+|$)",c="animationend",u="transitionend",p="target";t={rootDOMTravelScope:{},notifierCollection:{},init:function(){d._helperCollection={};var e=d._createDefaultHelper();t.registerHelper(r,e),d._helperDefaultIndex=r,t.rootDOMTravelScope=document,t.Parser=d.Parser,d._animationEndEvent=d._animationEndPrefix(),d._classNamesWhenAnim=""},setDOMRootTravelScope:function(e){var n,r=document;try{"document"===e?n=r:(n=r.querySelector(e),n||(n=r))}catch(i){n=r}t.rootDOMTravelScope=n},run:function(){var e=[],r={};t.purgeAll(),t.notifierCollection={},e=d._findAniJSNodeCollection(t.rootDOMTravelScope);var i,a=e.length,o=0;for(o;a>o;o++)i=e[o],r=d._getParsedAniJSSentenceCollection(i.getAttribute(n)),d._setupElementAnim(i,r);var l=t.getNotifier("AniJSNotifier");l&&l.dispatchEvent("onRunFinished")},createAnimation:function(e,t){var n=t||"";d._setupElementAnim(n,e)},getHelper:function(e){var t=d._helperCollection;return t[e]||t[r]},registerHelper:function(e,t){d._helperCollection[e]=t},purge:function(e){if(e&&""!==e&&" "!==e){var n=document.querySelectorAll(e),r=n.length,i=0;for(i;r>i;i++)t.EventSystem.purgeEventTarget(n[i])}},purgeAll:function(){t.EventSystem.purgeAll()},purgeEventTarget:function(e){t.EventSystem.purgeEventTarget(e)},setClassNamesWhenAnim:function(e){d._classNamesWhenAnim=" "+e},createNotifier:function(){return t.EventSystem.createEventTarget()},registerNotifier:function(e){var n=t.notifierCollection;return e.id&&e.value&&t.EventSystem.isEventTarget(e.value)?(n[e.id]=e.value,1):""},getNotifier:function(e){return t.notifierCollection[e]}};var d={};return d._createDefaultHelper=function(){var e={removeAnim:function(e,t){e.target&&e.type&&t.nodeHelper.removeClass(e.target,t.behavior)},holdAnimClass:function(e,t){},fireOnce:function(e,t){t.eventSystem.removeEventListenerHelper(t.eventTarget,t.event.type,t.listener)},emit:function(e,n,r){var i=r[0]||null,a="";if(null!==i){i=i.split("."),i.length>1?(a=i[0],i=i[1]):(a="",i=i[0]);var o=t.getNotifier(a)||null;null!==o&&o.dispatchEvent(i)}n.hasRunned||n.run()}};return e},d._createParser=function(){return new Parser},d._setupElementAnim=function(e,t){var n,r,i,a,o=t.length,l=0;for(l;o>l;l++)n=t[l],i=n.after,r=n.before,a=n.behavior,i&&(n.after=d.Parser.parseDoDefinition(i)),r&&(n.before=d.Parser.parseDoDefinition(r)),a&&(n.behavior=d.Parser.parseDoDefinition(a)),d._setupElementSentenceAnim(e,n)},d._setupElementSentenceAnim=function(e,n){var r,i=d._eventHelper(n),a=d._eventTargetHelper(e,n);if(n.after&&d.Util.beArray(n.after)&&(r=n.after[0]),""!==i){var o,l=a.length,s=0;for(s;l>s;s++)if(o=a[s],t.EventSystem.isEventTarget(o)){var f=function(i){var a=d._behaviorTargetHelper(e,n,i),o=d._behaviorHelper(n),l=d._beforeHelper(e,n),s=d._afterHelper(e,n);""!==d._classNamesWhenAnim&&(d.Util.beArray(o)||(o+=d._classNamesWhenAnim));var v={behaviorTargetList:a,nodeHelper:d.NodeHelper,animationEndEvent:d._animationEndEvent,behavior:o,after:s,eventSystem:t.EventSystem,eventTarget:i.currentTarget,afterFunctionName:r,dataAniJSOwner:e,listener:f,event:i,before:l},c=new t.AnimationContext(v);c.runAll(v)};t.EventSystem.addEventListenerHelper(o,i,f,!1),t.EventSystem.registerEventHandle(o,i,f)}}},d._eventHelper=function(e){var t="",n=e.event||t;return n===c?n=d._animationEndPrefix():n===u&&(n=d._transitionEndPrefix()),n},d._eventTargetHelper=function(n,r){var i,a=n,o=[a],l=t.rootDOMTravelScope;if(r.eventTarget)if(i=d._notifierHelper(r.eventTarget),i.length>0)o=i;else if("document"===r.eventTarget)o=[document];else if("window"===r.eventTarget)o=[e];else if(r.eventTarget.split)try{o=l.querySelectorAll(r.eventTarget)}catch(s){console.log("Ugly Selector Here"),o=[]}return o},d._behaviorTargetHelper=function(e,n,r){var i=e,o=[i],l=t.rootDOMTravelScope,s=n.behaviorTarget;if(s)if(d.Util.beArray(s)){var f=this._actionHelper(e,n,s);f&&d.Util.isFunction(f[0])&&(o=f[0](r,{dataAniJSOwner:e},d._paramsHelper(f)))}else if(s===p&&r.currentTarget)o=[r.currentTarget];else{s=s.split(a).join(",");try{o=l.querySelectorAll(s)}catch(v){o=[]}}return o},d._behaviorHelper=function(e){return this._actionHelper({},e,e.behavior)},d._afterHelper=function(e,t){var n=t.after;return d.Util.beArray(n)?this._actionHelper(e,t,n):d._callbackHelper(e,t,n)},d._beforeHelper=function(e,t){var n=t.before;return d.Util.beArray(n)?this._actionHelper(e,t,n):d._callbackHelper(e,t,n)},d._actionHelper=function(e,t,n){var r,i=n||"";return d.Util.beArray(i)&&(r=d._callbackHelper(e,t,i[0]),r?i[0]=r:i=i.join(" ")),i},d._callbackHelper=function(e,t,n){var r=n||"",i=d._helperHelper(t);if(r&&!d.Util.isFunction(r)){var a=d._helperCollection,o=a[i];r=o&&d.Util.isFunction(o[r])?o[r]:!1}return r},d._helperHelper=function(e){var t=e.helper||d._helperDefaultIndex;return t},d._notifierHelper=function(e){{var n=[];t.notifierCollection}if(e)if(e.id&&t.EventSystem.isEventTarget(e.value))n.push(e.value),t.registerNotifier(e);else if(e.split){notifierIDList=e.split("$");var r,i=notifierIDList.length,a=1;for(a;i>a;a++)if(r=notifierIDList[a],r&&" "!==r){r=r.trim();var o=t.getNotifier(r);o||(o=t.EventSystem.createEventTarget(),t.registerNotifier({id:r,value:o})),n.push(o)}}return n},d._paramsHelper=function(e){for(var t=[],n=e.length;n-->1;)t[n-1]=e[n];return t},d._getParsedAniJSSentenceCollection=function(e){return d.Parser.parse(e)},d._findAniJSNodeCollection=function(e){var t="["+n+"]";return e.querySelectorAll(t)},d._animationEndPrefix=function(){var e=d._endPrefixBrowserDetectionIndex(),t=[c,"oAnimationEnd",c,"webkitAnimationEnd"];return t[e]},d._transitionEndPrefix=function(){var e=d._endPrefixBrowserDetectionIndex(),t=[u,"oTransitionEnd",u,"webkitTransitionEnd"];return t[e]},d._endPrefixBrowserDetectionIndex=function(){for(var e=document.createElement("fe"),t="Animation",n=["animation","O"+t,"Moz"+t,"webkit"+t],r=0;r<n.length;r++)if(void 0!==e.style[n[r]])return r},t.AnimationContext=function(e){var n=this;n.init=function(e){n.behaviorTargetList=e.behaviorTargetList||[],n.nodeHelper=e.nodeHelper,n.animationEndEvent=e.animationEndEvent,n.behavior=e.behavior,n.after=e.after,n.eventSystem=e.eventSystem,n.eventTarget=e.eventTarget,n.afterFunctionName=e.afterFunctionName,n.dataAniJSOwner=e.dataAniJSOwner,n.listener=e.listener,n.event=e.event,n.before=e.before},n.doDefaultAction=function(e,t){var r,i=n,a=i.nodeHelper,o=i.animationEndEvent,l=i.after,s=i.afterFunctionName;i.eventSystem.addEventListenerHelper(e,o,function(e){e.stopPropagation(),i.eventSystem.removeEventListenerHelper(e.target,e.type,arguments.callee),l&&(d.Util.isFunction(l)?l(e,n):d.Util.beArray(l)&&l[0](e,n,d._paramsHelper(l)))}),"holdAnimClass"!==s&&"$holdAnimClass"!==s&&(r=e._ajLastBehavior,r&&a.removeClass(e,r),e._ajLastBehavior=t),e.offsetWidth=e.offsetWidth,a.addClass(e,t)},n.doFunctionAction=function(e,t){var r=n,i=r.after,a={target:e};t[0](a,n,d._paramsHelper(t)),d.Util.isFunction(i)?i(a,n):d.Util.beArray(i)&&i[0](a,n,d._paramsHelper(i))},n.runAll=function(){var e,r,i=n,a=i.behaviorTargetList,o=a.length,l=(i.behavior,0),s=i.before,f=n.event;for(l;o>l;l++)r={behaviorTargetList:[a[l]],nodeHelper:n.nodeHelper,animationEndEvent:n.animationEndEvent,behavior:n.behavior,after:n.after,eventSystem:n.eventSystem,eventTarget:n.eventTarget,afterFunctionName:n.afterFunctionName,dataAniJSOwner:n.dataAniJSOwner,listener:n.listener,event:f},e=new t.AnimationContext(r),s?d.Util.isFunction(s)?s(f,e):d.Util.beArray(s)&&s[0](f,e,d._paramsHelper(s)):e.run()},n.run=function(){var e=n,t=e.behavior,r=e.behaviorTargetList[0];n.hasRunned=1,d.Util.beArray(t)?e.doFunctionAction(r,t):e.doDefaultAction(r,t)},n.init(e)},d.Parser={parse:function(e){return this.parseDeclaration(e)},parseDeclaration:function(e){var t,n,r=[];t=e.split(";");var i=t.length,a=0;for(a;i>a;a++)n=this.parseSentence(t[a]),r.push(n);return r},parseSentence:function(e){var t,n,r={};t=e.split(",");var i=t.length,a=0;for(a;i>a;a++)n=this.parseDefinition(t[a]),r[n.key]=n.value;return r},parseDefinition:function(e){var t,n,r,i={},a="event",f="eventTarget",v=["behavior","after","before","behaviorTarget"];if(t=e.split(":"),t.length>1){if(n=t[0].trim(),t.length>2?(r=t.slice(1),r=r.join(":"),r=r.trim()):r=t[1].trim(),i.value=r,n===o)n=a;else if(n===l)n=f;else for(var c=s.length-1;c>=0;c--)n===s[c]&&(n=v[c],"after"!==n&&"before"!==n||"$"===r[0]||(r="$"+r),r=this.parseDoDefinition(r));i.key=n,i.value=r}return i},parseDoDefinition:function(e){var t=/^\$(\w+)\s*/g,n=t.exec(e),r="",a=1;if(null!==n){r=n[1],doDefinitionArray=e.split(n[0])[1],doDefinitionArray=null!==doDefinitionArray?doDefinitionArray.split(i):[],e=[],e[0]=r;for(var o=0;o<doDefinitionArray.length;o++)""!==doDefinitionArray[o]&&(e[a++]=doDefinitionArray[o].trim());return e}return e}},d.NodeHelper={addClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)t[n]&&!new RegExp(f+t[n]+v).test(e.className)&&(e.className=""===e.className?t[n]:e.className.trim()+" "+t[n])},removeClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)e.className=e.className.replace(new RegExp(f+t[n]+v)," ").trim()},hasClass:function(e,t){return t&&new RegExp(f+t+v).test(e.className)}},d.Util={isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},beArray:function(e){return Array.isArray(e)}},t.EventSystem={eventCollection:{},eventIdCounter:0,isEventTarget:function(e){return e.addEventListener?1:0},createEventTarget:function(){return new t.EventTarget},addEventListenerHelper:function(e,t,n,r){e.addEventListener(t,n,!1)},removeEventListenerHelper:function(e,t,n){e&&e.removeEventListener(t,n)},purgeAll:function(){var e,t,n=this,r=n.eventCollection,i=Object.keys(r),a=i.length,o=0;for(o;a>o;o++)e=i[o],t=r[e],t&&t.handleCollection&&t.handleCollection.length>0&&n.purgeEventTarget(t.handleCollection[0].element),delete r[e]},purgeAllNodes:function(e){var t=e.querySelectorAll("*");size=t.length;for(var n=size-1;n>=0;n--)this.purgeEventTarget(t[n])},purgeEventTarget:function(e){var t,n=this,r=e._aniJSEventID;if(r){t=n.eventCollection[r].handleCollection;var i,a=t.length,o=0;for(o;a>o;o++)i=t[o],n.removeEventListenerHelper(e,i.eventType,i.listener);n.eventCollection[r]=e._aniJSEventID=null,delete n.eventCollection[r],delete e._aniJSEventID}},registerEventHandle:function(e,t,n){var r=this,i=e._aniJSEventID,a=r.eventCollection,o={eventType:t,listener:n,element:e};if(i)a[i].handleCollection.push(o);else{var l={handleCollection:[o]};a[++r.eventIdCounter]=l,e._aniJSEventID=r.eventIdCounter}}},t.EventTarget=function(){this._listeners={}},t.EventTarget.prototype={constructor:t.EventTarget,addEventListener:function(e,t,n){var r=this;"undefined"==typeof r._listeners[e]&&(r._listeners[e]=[]),r._listeners[e].push(t)},dispatchEvent:function(e){var t=this;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(this._listeners[e.type]instanceof Array)for(var n=t._listeners[e.type],r=0,i=n.length;i>r;r++)n[r].call(t,e)},removeEventListener:function(e,t){var n=this;if(n._listeners[e]instanceof Array)for(var r=n._listeners[e],i=0,a=r.length;a>i;i++)if(r[i]===t){r.splice(i,1);break}}},t}(n||{});return n.init(),n.run(),"function"==typeof define&&define.amd&&define("anijs",[],function(){return n}),"undefined"==typeof t&&(e.AniJS=n),n});